## Введение

Приложение для сканирования штрихкодов через telegram бота.
Боту необходимо скинуть фотографию, где есть штрихкод и он попытается его распознать.
Если не получится, то бот предложит кнопку, которая перекинет на сайт со сканнером.

После сканирования, бот будет искать товар по этому штрихкоду.
Если находит, то показывает вам отзыв, который вы ранее оставляли.

Если не находит, то предлагает вам сделать фотку товара и добавить отзыв.

## Development

#### Start bot:
1. Download redis server
2. `redis-server`
3. `yarn install`
4. `yarn run bot:dev`

#### Start web view:
1. `yarn install`
2. `yarn run wv:start`

------

На чем остановился:

Основная задача - запустить бота на хостинге
[x] Докер файл для запуска приложения
[x] Запускать редис в докере
[x] Пробросить порт редиса в nodejs приложение 
[x] Попробовать запустить бота локально и проверить, что он работает
[x] Почистить Dockerfile от переноса node_modules
[ ] Перенести ngrok в докер
[ ] Прокидывать url ngrok'a в приложение (https://stackoverflow.com/questions/71032836/how-to-correctly-configure-ngrok-docker-container-for-node-or-react-app)
[ ] Докер также должен запустить веб вью
[ ] Выгрузить код на хостинг и попробовать запустить бота там
      (пытался разные хостинги попробовать. В итоге остановился на render.com.
      Сначала нужно попробовать node приложение там запустить. Редис можно будет потом отдельно прогнать)


## TODO List
create build for web-view
use firebase for hosting

// идея:
// Заходя в бота, есть такие функции
// 1. Отсканировать товар
// 2. Написать отзыв
// 3. Посмотреть свои товары
// 4. Удалить товар

// МВП
// Сканер на сайте/на ноде.
// Предложение натыкать отзыв
// Деплой в облако


// 1.
// Пользователю предлагают сфоткать штрихкод, если он ранее брал такой товар
// Или перейти на сайт и отсканировать через камеру
// Если не брал, то предлагают сохранить штрихкод для будущих поисков по базе
// После того, как определили точный штрихкод:
    надо заставить его именно сканировать, потому что можно следить за процентом
    ошибочных сканирований. Даем пару секунд на сканирование.
    Записываем сканируемые варианты в MAP<barcode_number, count>
    Берем тот баркод, который чаще всего был отсканирован и спрашиваем у юзера, правильно ли все отсканировалось. Если да, то рисуем ему кнопки, чтобы он выбрал категорию товара. Заполнил имя и сделал фотку.
    
У каждого пользователя будет своя БД с товарами.

// 2. Предлагаем выбрать товар (сортировка по дате сканирования)
   рендерим кнопки, для быстрого отзыва, потыкав на них, сформируется какой-то типовой отзыв
   Нужно подумать о том, чтобы пользователь мог сам эти кнопки формировать

// 3. Предлагаем перейти на сайт или рендерить в телеге
   рисуем N товаров, вместе с отзывами

// 4. Предлагаем список товаров. Нажимая на товар, переспрашиваем, точно ли его нужно удалить?

-----------

1. `npm run generate`
2. ...sorry, i'm lazy for this ))


## Seed bar codes

1. `npx prisma db seed`